<!DOCTYPE html><html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìˆ² ì‹œì²­ ë¦¬ìº¡</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { margin:0; background:#0b0f14; color:#e5e7eb; font-family: Pretendard, Arial, sans-serif; }
    h1,h2 { color:#6ee7e7; }
    .container { padding:20px; }
    .card { background:#111827; border-radius:12px; padding:16px; margin-bottom:20px; box-shadow:0 0 0 1px #1f2937; }
    select, input { background:#020617; color:#e5e7eb; border:1px solid #1f2937; padding:6px 8px; border-radius:6px; }
    table { width:100%; border-collapse:collapse; }
    th,td { padding:8px; border-bottom:1px solid #1f2937; text-align:left; }
    th { color:#93c5fd; cursor:pointer; }
    tr:hover { background:#020617; }
    .muted { color:#9ca3af; font-size:12px; }
  </style>
</head>
<body>
<div class="container">
  <h1>ğŸ“Š ìˆ² ì‹œì²­ ë¦¬ìº¡ (2025)</h1>  <div class="card">
    <h2>(a) ì „ì²´ ìŠ¤íŠ¸ë¦¬ë¨¸ ìˆœìœ„</h2>
    <input id="search" placeholder="ìŠ¤íŠ¸ë¦¬ë¨¸ ê²€ìƒ‰" />
    <table id="totalTable"></table>
  </div>  <div class="card">
    <h2>(b) ì›”ë³„ ìˆœìœ„</h2>
    <select id="monthSelect"></select>
    <canvas id="monthChart"></canvas>
  </div>  <div class="card">
    <h2>(c) ì¼ë³„ ìˆœìœ„</h2>
    <table id="dailyTable"></table>
  </div>  <div class="card">
    <h2>(d) ì›”ë³„ ì´ ì‹œì²­ëŸ‰ ë¹„êµ</h2>
    <canvas id="allMonthChart"></canvas>
  </div>
</div><script>
// ===== ê·¸ë£¹ ì •ì˜ =====
const GROUPS = {
  "ì´ì„¸ê³„ì•„ì´ëŒ": ["ì•„ì´ë„¤","ì§•ë²„ê±°","ë¦´íŒŒ","ì£¼ë¥´ë¥´","ê³ ì„¸êµ¬","ë¹„ì±¤"],
  "ê³ ë©¤ í´ë˜ì‹": ["ê³½ì¶˜ì‹","ê¶Œë¯¼","ê¹€ì¹˜ë§Œë‘ë²ˆì˜íƒì‚¬ìŠ¤ê°€","ë‹¨ë‹µë²Œë ˆ","ë„íŒŒë¯¼ë°•ì‚¬","ë¢´íŠ¸ê²ŒëŠ„","ë¹„ë°€ì†Œë…€","ë¹„ì¦ˆë‹ˆìŠ¤í‚´","ì™íŒŒê³ ","í’ì‹ ","í•´ë£¨ì„","íˆí‚¤í‚¹","ë…ê³ í˜œì§€","ë¶€ì •í˜•ì¸ê°„","ì†Œí”¼ì•„","ì´ë•ìˆ˜í• ì•„ë°”ì´","í‹°íŒŒë‹ˆ0421","ì•„ë¥´ë°”","ìœµí„°ë¥´","ë…¸ìŠ¤í˜ë¼íˆ¬í˜¸","ìº˜ë¦¬ì¹¼ë¦¬ ë°ì´ë¹„ìŠ¨"],
  "ê³ ë©¤ ì•„ì¹´ë°ë¯¸": ["ë‹Œë‹Œ","ë¶ˆë…","ì‹œë¦¬ì•ˆ","ì•„ë§ˆë°ìš°ìŠ¤ìµœ","ì§„í¬","ì  íˆ¬","ìˆ˜ì…ˆì´","ê¸¸ë²„íŠ¸","ë¯¸ë¯¸ì§±ì§±ì„¸ìš©","ë¹…í† ë¦¬","ìµ¸ë¡œí‚¤","ì•„ì´ì“°ê»˜ë¼","ë²„í„°ìš°ìŠ¤","ìƒ¬ë¡¯","ë©”ì¹´ë§¹ê¸°ì‚°"]
};

// ===== ë°ì´í„° (ë¶„ ë‹¨ìœ„) =====
const RAW = [
  {date:"2025-01-01", name:"ì§•ë²„ê±°", min:166},
  {date:"2025-01-01", name:"ë‹¼ë°œ", min:14},

  {date:"2025-01-04", name:"ìš°ì™êµ³", min:24},

  {date:"2025-01-05", name:"ìš°ì™êµ³", min:195},
  {date:"2025-01-05", name:"ì§•ë²„ê±°", min:39},
  {date:"2025-01-05", name:"ë‹¼ë°œ", min:17},

  {date:"2025-01-06", name:"ë‹¼ë°œ", min:173},
  {date:"2025-01-06", name:"ìš°ì™êµ³", min:83},

  {date:"2025-01-09", name:"ë‹¼ë°œ", min:115},
  {date:"2025-01-09", name:"ìš°ì™êµ³", min:73},

  {date:"2025-01-10", name:"ë‹¼ë°œ", min:239},
  {date:"2025-01-10", name:"ë¹„ì±¤", min:6},
  {date:"2025-01-10", name:"ìš°ì™êµ³", min:4},

  {date:"2025-01-11", name:"ìš°ì™êµ³", min:177},

  {date:"2025-01-12", name:"ê³ ì„¸êµ¬", min:77},
  {date:"2025-01-12", name:"ë‹¼ë°œ", min:20},
  {date:"2025-01-12", name:"ìš°ì™êµ³", min:2},

  {date:"2025-01-13", name:"ì§•ë²„ê±°", min:103},
  {date:"2025-01-13", name:"ë‹¼ë°œ", min:48},
  {date:"2025-01-13", name:"ìš°ì™êµ³", min:13},

  {date:"2025-01-14", name:"ë‹¼ë°œ", min:69},

  {date:"2025-01-15", name:"ë¹„ì¦ˆë‹ˆìŠ¤í‚´", min:50},
  {date:"2025-01-15", name:"ìº˜ë¦¬ì¹¼ë¦¬ ë°ì´ë¹„ìŠ¨", min:40},
  {date:"2025-01-15", name:"í‹°íŒŒë‹ˆ0421", min:2},
  {date:"2025-01-15", name:"ì§„í¬", min:1},

  {date:"2025-01-16", name:"ë‹¼ë°œ", min:198},
  {date:"2025-01-16", name:"ë¹„ì±¤", min:55},
  {date:"2025-01-16", name:"ìš°ì™êµ³", min:52},

  {date:"2025-01-17", name:"ìš°ì™êµ³", min:62},

  {date:"2025-01-18", name:"ìš°ì™êµ³", min:155},
  {date:"2025-01-18", name:"ë‹¼ë°œ", min:16},

  {date:"2025-01-19", name:"ë‹¼ë°œ", min:250},

  {date:"2025-01-20", name:"ë‹¼ë°œ", min:236},

  {date:"2025-01-21", name:"ì§•ë²„ê±°", min:197},
  {date:"2025-01-21", name:"ë‹¼ë°œ", min:147},

  {date:"2025-01-22", name:"ë‹¼ë°œ", min:238},
  {date:"2025-01-22", name:"ìš°ì™êµ³", min:76},
  {date:"2025-01-22", name:"ë¢´íŠ¸ê²ŒëŠ„", min:22},

  {date:"2025-01-23", name:"ë‹¼ë°œ", min:220},
  {date:"2025-01-23", name:"ìš°ì™êµ³", min:139},

  {date:"2025-01-24", name:"ë‹¼ë°œ", min:224},

  {date:"2025-01-25", name:"ë‹¼ë°œ", min:233},
  {date:"2025-01-25", name:"ìš°ì™êµ³", min:190},
  {date:"2025-01-25", name:"ë¢´íŠ¸ê²ŒëŠ„", min:64},

  {date:"2025-01-26", name:"ë‹¼ë°œ", min:166},
  {date:"2025-01-26", name:"ë¹„ì±¤", min:125},
  {date:"2025-01-26", name:"ë¦´íŒŒ", min:67},
  {date:"2025-01-26", name:"ë¢´íŠ¸ê²ŒëŠ„", min:26},
  {date:"2025-01-26", name:"ìš°ì™êµ³", min:2},

  {date:"2025-01-27", name:"ë‹¼ë°œ", min:132},
  {date:"2025-01-27", name:"ê³ ì„¸êµ¬", min:16},

  {date:"2025-01-28", name:"ë‹¼ë°œ", min:224},
  {date:"2025-01-28", name:"ìš°ì™êµ³", min:119},
  {date:"2025-01-28", name:"ë¹„ì±¤", min:86},

  {date:"2025-01-29", name:"ë‹¨ë‹µë²Œë ˆ", min:21},
  {date:"2025-01-29", name:"ìš°ì™êµ³", min:11},
  {date:"2025-01-29", name:"ê³½ì¶˜ì‹", min:7},
  {date:"2025-01-29", name:"ë¹„ì¦ˆë‹ˆìŠ¤í‚´", min:1},

  {date:"2025-01-30", name:"ë‹¼ë°œ", min:293},
  {date:"2025-01-30", name:"ì£¼ë¥´ë¥´", min:117},
  {date:"2025-01-30", name:"ìš°ì™êµ³", min:1},

  {date:"2025-01-31", name:"ë¦´íŒŒ", min:112}
];
  
// ===== ìœ í‹¸ =====
const sumBy = (arr, keyFn) => {
  const m = {};
  arr.forEach(v => {
    const k = keyFn(v);
    m[k] = (m[k]||0) + v.min;
  });
  return m;
};

const groupOf = name => {
  for (const g in GROUPS) if (GROUPS[g].includes(name)) return g;
  return "ê¸°íƒ€";
};

// ===== ì „ì²´ ìŠ¤íŠ¸ë¦¬ë¨¸ ì§‘ê³„ =====
const totalByStreamer = sumBy(RAW, v=>v.name);

function renderTotalTable() {
  const q = document.getElementById('search').value;
  const rows = Object.entries(totalByStreamer)
    .filter(([n])=>n.includes(q))
    .sort((a,b)=>b[1]-a[1]);

  let html = '<tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>ê·¸ë£¹</th><th>ëˆ„ì  ì‹œì²­(ë¶„)</th></tr>';
  rows.forEach(([n,m],i)=>{
    html += `<tr><td>${i+1}</td><td>${n}</td><td class="muted">${groupOf(n)}</td><td>${m}</td></tr>`;
  });
  document.getElementById('totalTable').innerHTML = html;
}

// ===== ì›”ë³„ =====
const months = [...new Set(RAW.map(v=>v.date.slice(0,7)))];
const monthSel = document.getElementById('monthSelect');
months.forEach(m=>{
  const o=document.createElement('option'); o.value=m; o.text=m; monthSel.appendChild(o);
});

let monthChart;
function renderMonth() {
  const m = monthSel.value;
  const data = RAW.filter(v=>v.date.startsWith(m));
  const summed = sumBy(data,v=>v.name);
  const labels = Object.keys(summed);
  const vals = Object.values(summed);
  if (monthChart) monthChart.destroy();
  monthChart = new Chart(document.getElementById('monthChart'),{
    type:'bar',
    data:{labels, datasets:[{data:vals}]},
    options:{plugins:{legend:{display:false}}}
  });
}

// ===== ì¼ë³„ =====
const dailySum = sumBy(RAW, v=>v.date);
function renderDaily() {
  const rows = Object.entries(dailySum).sort((a,b)=>b[1]-a[1]);
  let html='<tr><th>ë‚ ì§œ</th><th>ì´ ì‹œì²­(ë¶„)</th></tr>';
  rows.forEach(r=> html+=`<tr><td>${r[0]}</td><td>${r[1]}</td></tr>`);
  document.getElementById('dailyTable').innerHTML=html;
}

// ===== ì›” ì „ì²´ ë¹„êµ =====
const monthSum = sumBy(RAW, v=>v.date.slice(0,7));
new Chart(document.getElementById('allMonthChart'),{
  type:'line',
  data:{labels:Object.keys(monthSum), datasets:[{data:Object.values(monthSum)}]},
  options:{plugins:{legend:{display:false}}}
});

// ===== ì´ë²¤íŠ¸ =====
document.getElementById('search').oninput=renderTotalTable;
monthSel.onchange=renderMonth;

renderTotalTable(); renderDaily(); renderMonth();
</script></body>
</html>
